<link rel="stylesheet" href="../css/styles.css" />

<section aria-labelledby="complete-title">
  <h2 id="complete-title" class="section-title">All done üéâ</h2>
  <p class="mt-8">
    Your data has been saved locally. What would you like to do next?
  </p>
  <div
    class="mt-24 grid"
    style="gap: 12px; grid-template-columns: repeat(3, minmax(0, 1fr))"
  >
    <!-- Preview Button -->
    <button id="btnPreview" class="btn" type="button">
      Preview Master Customer Summary
    </button>
    <!-- Generate PDF Button -->
    <button id="generatePdfBtn" type="button" class="btn primary">
      Generate PDF
    </button>
    <!-- Export JSON Button -->
    <button class="btn btn--ghost" id="btn-export" type="button">
      Export JSON
    </button>
  </div>

  <!-- Modal for Preview -->
  <dialog id="previewModal" aria-label="MAOS Preview">
    <div class="pv-header">
      <div class="pv-title">Master Customer Summary ‚Äî Preview (Read only)</div>
      <button id="closePreview" class="pv-close" aria-label="Close">‚úï</button>
    </div>
    <iframe
      id="previewFrame"
      src=""
      title="MAOS Preview"
      referrerpolicy="no-referrer"
      style="width: 100%; height: 400px; border: none"
    ></iframe>
  </dialog>

  <div class="mt-24">
    <p class="text-muted">
      Tip: ‚ÄúPreview PDF‚Äù opens a print‚Äëfriendly preview. ‚ÄúGenerate PDF‚Äù opens
      your browser‚Äôs print dialog so you can save as PDF.
    </p>
  </div>

  <script>
    // Open modal when Preview button is clicked
    document
      .getElementById("btnPreview")
      .addEventListener("click", function () {
        const modal = document.getElementById("previewModal");
        const frame = document.getElementById("previewFrame");
        frame.src = "../preview/preview.html"; // Set your preview file path here
        modal.showModal();
      });

    // Close modal when close button is clicked
    document
      .getElementById("closePreview")
      .addEventListener("click", function () {
        const modal = document.getElementById("previewModal");
        modal.close();
        document.getElementById("previewFrame").src = "";
      });
  </script>
</section>
